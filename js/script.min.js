window.onload=function(){window.editor=document.getElementById("editor");window.result=document.getElementById("result");var a=document.getElementById("modal"),b=document.getElementById("export");document.getElementById("chara-count");document.getElementsByClassName("btn-save");document.getElementsByClassName("btn-clear");var c=document.getElementsByClassName("btn-export")[0],d=document.getElementsByClassName("btn-toggle")[0];loadStorage(editor);window.setInterval(function(){saveStorage(editor)},
6E4);init();editor.addEventListener("change",function(){setPreview()},!1);editor.value&&setPreview();c.addEventListener("click",function(){b.value=getMarkedValue(editor.value);a.style.display="block"},!1);b.addEventListener("focus",function(){b.select()},!1);d.addEventListener("click",function(a){togglePreview(a.target)},!1);window.addEventListener("click",function(b){b.target==a&&(a.style.display="none")},!1)};
function init(){window.cm=window.CodeMirror.fromTextArea(window.editor,{mode:{name:"markdown",highlightFormatting:!0},theme:"markdown",autofocus:!0,lineNumbers:!0,indentUnit:4,tabSize:2,electricChars:!0,styleActiveLine:!0,matchBrackets:!0,lineWrapping:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"}});cm.on("change",function(a){a=document.createEvent("HTMLEvents");a.initEvent("change",!0,!1);window.editor.dispatchEvent(a);window.editor.value=cm.getValue()});window.marked.setOptions({langPrefix:"language-",
breaks:!0})}function getMarkedValue(a){a=stripScriptTag(a);return marked(a)}function setPreview(){var a=getMarkedValue(window.editor.value);setTextCount(a);window.result.innerHTML=a;Prism.highlightAll()}function stripScriptTag(a){for(var b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;b.test(a);)a=a.replace(b,"");return a}function setTextCount(a){document.getElementById("chara-count").innerHTML=a.length}
function togglePreview(a){var b=document.getElementsByClassName("preview-side")[0],c=document.getElementsByClassName("editor-side")[0];a=a.classList;"none"==b.style.display?(b.style.display="",c.style.width="",a.remove("octicon-chevron-left"),a.add("octicon-chevron-right")):(b.style.display="none",c.style.width="100%",a.remove("octicon-chevron-right"),a.add("octicon-chevron-left"))}function save(){window.confirm("Save?")&&(saveStorage(window.editor),setPreview())}
function clear(){window.confirm("Clear?")&&(cm.getDoc().setValue(""),clearStorage(),setPreview())}function saveStorage(a){localStorage.setItem("markunVal",a.value)}function loadStorage(a){a.innerHTML=localStorage.getItem("markunVal")}function clearStorage(){localStorage.removeItem("markunVal")};
